<!doctype html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, minimum-scale=1.0, initial-scale=1.0, user-scalable=no">
  <title>myscript-renderer Demo</title>
  <script src="../../webcomponentsjs/webcomponents-lite.js"></script>
  <link rel="import" href="../myscript-renderer.html">

</head>
<body>

<myscript-renderer></myscript-renderer>
<canvas id="canvas" touch-action="none"></canvas>


<script>

    canvas.width = canvas.parentElement.clientWidth;
//    canvas.height = canvas.parentElement.clientHeight;
    canvas.height = window.innerHeight;

    document.addEventListener('WebComponentsReady', function() {
        var renderer = document.querySelector('myscript-renderer'),
                canvas = document.querySelector('canvas'),
                context = canvas.getContext('2d'),
                stroke = new MyScript.Stroke(),
                stroke1 = new MyScript.Stroke(),
                stroke2 = new MyScript.Stroke(),
                stroke3 = new MyScript.Stroke(),
                stroke4 = new MyScript.Stroke(),
                strokes = [],
                pointerId = undefined,
                scale = function(stroke, ratio){
                    var x = [], y = [];
                    for(var i=0;i<stroke.getX().length;i++){
                        x[i] = stroke.getX()[i]/ratio;
                        y[i] = stroke.getY()[i]/ratio;
                    }
                    stroke.setX(x);
                    stroke.setY(y);
                };


        // Add the Write Here strokes
        stroke.setX([105,105,105,105,105,106,106,107,107,107,107,108,108,109,110,110,111,112,113,114,115,116,116,117,117,118,118,119,119,119,120,120,121,121,121,122,122,122,122,122,122,122,123,123,123,124,124,124,124,124,124,124,124,125,125,125,125,125,125,125,125,125,125,125,125,125,125,125,125,125,126,126,126,126,126,126,126,126,127,127,127,127,127,127,127,128,128,128,128,128,128,128,128,128,128,128,129,129,129,129,129,129,129,129,130,130,131,131,131,132,133,134,134,135,136,137,138,139,140,141,141,142,143,143,144,145,147,148,149,150,150,151,152,153,154,154,156,156,157,158,159,160,161,162,163,164,165,165,166,167,167,167,168,168,168,168,169,169,169,169,169,169,169,169,169,169,169,169,169,169,169,169,169,169,169,169,169,169,169,169,169,169,169,169,169,169,169,169,169,170,170,171,171,171,172,172,172,173,174,175,176,176,177,178,179,180,181,182,183,185,186,187,189,191,192,194,195,197,198,199,200,202,203,204,206,207,208,209,210,211,212,212,213,213,214,214,215,216,216,216,216,217,217,217,217,218,218,219,219,219,220,220,220,220,220,220,220,220,220,221,221,221,221,222,222,222,222,222,222,222,222,222,221,221,220,220,219,219,218,217,217,216,216,215,215,214,213,212,211,210,209,208,208,208,208,207,207,207,207,207,208,208,209,210,210,211,212,213,213,214,215,216,217,218,219,220,221,222,223,224,226,227,228,229,231,233,234,236,238,239,241,243,244,246,247,249,250,251,252,253,254,256,258,261,263,265,266,267,267,267,267,267,267,267]);
        stroke.setY([154,152,151,149,148,146,145,143,142,141,140,139,138,137,136,135,135,136,137,138,139,140,141,142,143,143,144,145,146,147,148,149,150,151,153,153,154,155,156,157,158,159,160,161,163,165,166,167,168,169,170,171,173,173,175,177,178,179,180,182,184,185,186,188,189,190,192,194,195,197,198,200,201,202,204,205,206,207,209,210,212,213,214,215,217,217,218,219,220,221,222,224,225,227,228,230,231,233,234,235,236,238,239,240,241,242,243,244,245,246,248,249,250,251,252,253,254,254,255,255,256,256,256,257,257,257,257,257,257,257,256,256,255,255,255,254,254,253,252,252,251,250,249,248,247,245,244,243,241,239,238,237,236,235,234,232,231,230,229,227,226,224,223,222,221,220,219,218,217,216,217,219,220,221,223,224,225,226,227,228,230,231,232,233,234,235,236,237,238,239,240,241,242,243,243,244,245,246,247,248,248,249,249,250,250,250,251,251,251,251,251,250,249,248,247,246,246,244,243,242,241,240,238,237,235,234,232,230,228,226,224,222,220,218,216,214,212,209,207,205,203,202,200,198,197,194,193,190,188,186,184,182,180,178,176,174,172,171,169,167,165,163,161,158,155,153,151,149,147,146,144,143,141,139,138,136,135,134,132,131,130,129,127,127,126,125,125,125,125,125,125,125,126,127,128,129,130,131,132,134,136,137,138,138,139,140,141,141,142,142,142,142,142,142,142,142,142,142,142,142,142,142,142,142,142,142,142,142,142,142,142,142,142,142,143,143,143,143,143,143,143,144,144,144,144,144,144,144,143,142,141,140,139,139]);
        scale(stroke, 2)
        strokes.push(stroke);

        stroke1.setX([216,217,219,221,222,224,226,227,228,229,230,231,232,233,233,234,234,235,235,235,235,236,236,236,236,236,237,237,237,238,238,238,238,239,239,240,240,241,241,242,243,243,244,245,245,246,246,246,246,246,246,246,246,246,246,246,246,246,246,247,247,247,247,247,248,248,248,249,249,250,250,251,251,251,252,252,253,254,255,255,256,257,258,259,261,262,263,264,265,266,267,267,268,268,268,269,269,270,270,270,271,271,271,271,271,271,271,271,272,272,272,272,272,272,271,271,271,271,271,271,271,271,271,271,271,271,272,272,273,273,273,274,275,276,276,277,278,278,279,280,281,282,283,284,286,287,288,289,291,292,293,294,295,297,298,299,300,301,302,302,303,304,305,305,306,306,307,307,307,308,308,309,309,310,310,310,310,310,311,311,311,312,312,312,313,314,314,315,316,317,317,318,318,319,319,319,319,320,320,320,320,320,320,319,318,317,316,315,315,315,314,314,313,313,313,313,313,312,312,312,312,311,311,311,311,311,311,311,311,311,311,311,311,311,311,311,312,312,312,312,312,312,312,312,313,313,313,313,313,313,313,313,313,313,313,313,314,314,314,314,314,314,314,315,315,315,315,315,315,315,315,315,315,315,315,315,316,316,317,317,317,318,319,319,320,320,321,322,323,325,326,327,328,329,330,331,333,334,335,336,337,337,338,339,340,341,342,343,343,344,345,345,345,346,347,347,347,348,348,348,348,348,347,347,347,347,346,346,345,344,343,342,341,340,339,338,337,336,336,335,334,334,333,333,332,332,331,331,331,331,331,331,331,331,331,332,332,333,333,334,334,335,335,336,337,338,339,339,340,341,342,343,344,345,346,347,348,349,350,350,351,352,353,354,355,356,359,361,364,367,370,373,375,376,377,377,377,376,376]);
        stroke1.setY([242,242,242,242,241,240,240,238,238,237,236,235,234,232,231,229,227,226,224,223,221,220,219,218,216,215,214,213,212,211,210,209,208,207,206,206,205,205,204,204,205,206,208,209,211,211,212,213,214,215,216,217,218,219,220,221,222,223,224,225,226,227,228,229,230,231,232,233,234,235,236,236,237,238,239,240,241,242,242,243,243,244,244,244,244,243,242,241,239,238,236,234,233,230,229,227,226,224,222,221,219,217,216,215,214,213,212,211,211,212,213,214,215,216,217,218,219,220,221,222,223,224,225,226,227,228,229,230,230,231,232,233,234,235,236,237,237,238,238,239,239,239,239,239,239,239,239,239,239,238,237,236,235,234,232,230,229,227,225,223,222,220,217,215,213,211,208,207,205,202,200,198,196,194,191,189,186,184,182,180,178,176,174,171,169,167,165,163,162,160,158,157,155,153,152,151,150,149,148,147,146,145,144,144,144,145,147,148,149,150,150,151,152,153,154,155,156,157,158,159,160,161,162,164,165,166,167,168,169,171,172,173,174,175,176,177,178,179,180,181,182,183,184,185,186,187,188,189,191,192,193,194,195,197,198,199,200,202,203,204,205,206,207,208,209,210,211,212,213,214,215,216,217,218,219,220,220,222,222,223,224,224,225,226,226,227,228,228,228,228,228,228,228,228,228,228,227,226,226,226,226,225,225,224,223,223,222,221,220,220,219,218,217,216,215,214,212,211,210,209,208,207,206,205,204,203,202,201,201,200,199,199,199,198,198,198,199,199,200,200,201,202,203,204,205,206,208,209,210,211,212,213,214,215,216,218,219,220,221,221,222,222,223,224,225,226,226,227,228,228,229,229,229,229,229,229,229,229,229,228,228,228,227,227,227,227,227,227,227,227,227,227,227,227,227,226,225,222,222]);
        scale(stroke1,2)
        strokes.push(stroke1);

        stroke2.setX([314,315,316,318,320,321,323,324,325,327,328,329,330,330]);
        stroke2.setY([163,164,164,165,165,166,166,167,168,168,168,169,170,170]);
        scale(stroke2,2)
        strokes.push(stroke2);

        stroke3.setX([271,271]);
        stroke3.setY([185,185]);
        scale(stroke3,2)
        strokes.push(stroke3);

        stroke4.setX([432,433,435,436,438,440,441,443,445,446,447,448,450,451,452,454,456,457,458,459,460,461,461,461,462,463,464,465,465,466,467,468,469,470,471,472,473,473,473,474,474,474,475,475,475,475,475,475,475,475,475,475,475,475,475,475,475,475,475,475,475,475,475,474,474,473,473,473,472,472,472,472,471,470,469,468,467,466,465,464,463,463,463,462,462,462,461,461,461,461,461,460,460,460,460,460,460,460,460,461,461,461,461,461,462,462,462,462,462,463,463,463,463,463,464,464,464,464,464,464,464,465,465,465,465,465,465,465,465,465,465,465,465,465,465,466,466,466,466,466,466,466,466,466,466,466,467,467,467,467,467,467,467,467,467,467,467,467,467,467,467,467,467,467,467,467,467,467,467,467,467,467,467,467,467,466,466,466,466,466,466,466,466,467,467,467,467,467,468,468,468,469,469,469,470,470,470,471,471,471,472,472,472,473,474,476,477,478,479,480,481,482,483,483,483,484,484,484,485,485,486,486,487,488,488,488,489,489,489,490,491,492,493,494,495,496,497,497,498,499,500,501,502,503,505,506,507,509,510,511,511,512,513,514,515,515,516,516,517,518,518,519,519,519,520,520,520,520,520,520,520,520,520,519,518,517,517,516,516,516,515,515,515,514,514,514,514,513,513,513,513,514,514,515,516,517,518,519,520,521,522,523,524,525,526,527,528,529,529,530,531,532,533,534,535,536,537,537,538,539,540,540,541,542,542,543,543,544,545,545,546,546,547,547,548,548,548,548,549,549,549,549,549,549,548,548,547,547,547,548,549,550,551,552,553,554,555,556,557,558,559,560,561,562,562,562,562,562,562,562,562,562,562,562,562,563,563,563,564,564,564,565,565,566,566,567,567,568,569,570,571,572,573,574,575,576,576,577,578,578,579,579,580,581,582,583,584,585,586,587,588,589,590,590,591,592,592,593,594,594,594,595,595,595,595,595,595,595,595,595,595,595,594,593,592,591,590,589,589,588,587,586,586,586,585,585,585,585,585,585,585,585,585,585,586,586,586,587,587,588,588,589,590,591,592,593,594,595,596,597,598,599,600,601,602,603,604,605,606,607,608,609,610,611,612,613,613,613]);
        stroke4.setY([252,251,251,250,249,247,246,246,244,243,242,241,240,238,236,234,232,231,229,227,226,224,223,221,219,217,216,214,212,210,208,206,203,202,200,198,196,194,192,190,188,186,184,182,181,179,176,174,172,170,168,167,165,163,161,159,157,155,153,151,150,148,147,146,145,143,142,140,138,137,136,135,133,132,130,129,128,127,127,127,127,128,129,130,131,132,133,134,135,136,137,138,139,141,143,144,145,146,147,147,148,149,150,152,154,155,156,158,159,160,162,163,164,166,167,168,170,171,172,174,176,177,178,179,181,182,183,184,185,186,188,189,191,192,193,195,196,197,198,200,201,202,203,204,205,207,208,209,210,211,212,213,214,215,217,218,219,220,221,222,223,224,225,226,227,228,230,231,232,233,234,235,236,237,238,239,240,241,242,243,244,245,246,247,246,244,243,242,240,239,238,237,236,235,234,233,232,231,230,229,229,228,227,227,227,227,226,226,226,227,228,228,229,230,231,231,232,233,233,234,235,237,238,239,240,241,241,242,243,244,244,245,245,245,246,246,246,247,247,247,247,247,247,246,246,245,244,243,242,241,240,240,239,238,238,237,237,236,235,235,233,233,232,231,230,229,228,227,226,225,224,223,222,222,222,222,223,224,225,226,227,228,229,230,231,232,233,234,235,236,237,238,239,240,240,240,241,241,241,241,241,241,241,241,241,241,240,240,239,239,239,239,238,237,237,236,236,235,235,234,234,233,232,231,230,229,228,227,226,225,224,223,222,221,219,218,217,216,216,214,213,212,213,214,214,215,216,217,218,218,218,219,219,219,219,219,219,219,219,219,219,219,219,219,220,221,222,223,224,225,226,227,228,229,230,230,231,232,232,233,234,234,235,235,236,236,237,237,237,237,237,237,237,237,237,237,236,236,236,235,235,234,234,234,233,233,232,231,231,231,230,229,229,228,228,227,226,225,225,224,222,222,221,220,219,218,217,216,215,214,213,212,212,212,212,211,211,211,212,212,213,214,215,216,217,218,219,220,221,222,223,224,225,226,226,227,228,229,230,230,231,231,231,232,232,232,232,232,232,232,232,231,231,231,230,230,229,229,229,228,228,228,228,228,228,228,227,227]);
        scale(stroke4,2)
        strokes.push(stroke4);

        // Drawing the Write Here strokes
        renderer.drawStrokes(strokes, context);

        canvas.onmousedown = function(event) {
            renderer.drawStart(event.clientX, event.clientY);
        };
        canvas.onmousemove = function(event) {
            renderer.drawContinue(event.clientX, event.clientY, context);
        };
        canvas.onmouseup = function(event) {
            renderer.drawEnd(event.clientX, event.clientY, context);
        };
        canvas.ontouchstart = function(event) {
            if(!pointerId){
                pointerId = event.changedTouches[0].identifier;
                renderer.drawStart(event.changedTouches[0].clientX, event.changedTouches[0].clientY);
            }
        };
        canvas.ontouchmove = function(event) {
            if (pointerId === event.changedTouches[0].identifier) {
                renderer.drawContinue(event.changedTouches[0].clientX, event.changedTouches[0].clientY, context);
            }
        };
        canvas.ontouchend = function(event) {
            if (pointerId === event.changedTouches[0].identifier) {
                renderer.drawEnd(event.changedTouches[0].clientX, event.changedTouches[0].clientY, context);
                pointerId = undefined;
            }
        };
    });
</script>
</body>
</html>
